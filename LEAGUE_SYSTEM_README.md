# 埃罗西卡大陆联赛系统 - 使用说明

## 📋 系统概述

这是一个完整的联赛管理系统，借鉴英超足球联赛机制，作为游戏的**主线内容**为玩家提供长期竞技目标。系统包含五大地区的四级联赛体系，支持升降级制度、附加赛机制和动物名单管理。

**重要特性**：
- 🎮 **主线模式**：所有玩家从青年联赛开始，通过努力晋级到更高联赛
- 🏆 **升降级系统**：赛季结束自动处理升降级，持续挑战更高级别
- 📜 **职业生涯追踪**：完整记录每个赛季的成绩和晋升历程
- 🐾 **动态名单管理**：从青年联赛晋级后需登记25只动物参赛

## 🌍 五大地区

埃罗西卡大陆分为五大地区，每个地区独立运营完整的联赛体系：

1. **伊缇** - 东部地区
2. **拜尼** - 西部地区
3. **罗娜** - 南部地区
4. **罗兰** - 北部地区
5. **巴卡** - 中部地区

## 🏆 联赛等级结构

### 1. 超级联赛（最高级）
- **队伍数量**：20支
- **赛制**：全赛季38轮（主客场双循环）
- **升降级**：
  - 末三位（第18、19、20名）直接降入冠军联赛
  - 无升级（已是最高级）

### 2. 冠军联赛
- **队伍数量**：24支
- **赛制**：全赛季46轮（主客场双循环）
- **升降级**：
  - **升级**：前2名直接升入超级联赛
  - **附加赛**：第3-6名争夺最后1个升级名额
    - 第3名 vs 第6名
    - 第4名 vs 第5名
    - 两场胜者进行决赛，决赛胜者升入超级联赛
  - **降级**：末三位降入甲级联赛

### 3. 甲级联赛
- **队伍数量**：24支
- **赛制**：全赛季46轮（主客场双循环）
- **升降级**：
  - **升级**：前2名直接升入冠军联赛
  - **附加赛**：第3-6名争夺最后1个升级名额（规则同冠军联赛）
  - **降级**：末四位降入青年联赛

### 4. 青年联赛（入门级）
- **队伍数量**：256支
- **赛制**：淘汰赛（256→128→64→32→16→8→4→决赛）
- **比赛规则**：
  - 每轮淘汰赛进行2场比赛
  - 如果1胜1负，则进行第3场决胜局
  - 胜者晋级下一轮
- **升级**：前4名升入甲级联赛
- **特点**：无需登记动物名单，每场比赛可自由选择

## ⚔️ 比赛规则

### 单场比赛机制
每场比赛由**5场1v1对战**组成：

1. 对战双方各选择5只动物进行1v1对战
2. 每场对战限时1分钟
3. 获胜条件：
   - 对方血量归零
   - 或倒计时结束时造成伤害较高者
4. 胜者记1次胜利，否则记1次失败
5. 最终统计总胜场决定比赛胜者

### 积分规则
- **胜利**：2分
- **失败**：0分
- **平局**：在积分相同时进行附加赛决出最终胜者

### 排名规则
1. 积分最高者排名靠前
2. 积分相同时，净胜球多者排名靠前
3. 净胜球相同时，进球数多者排名靠前
4. 如仍相同，则进行附加赛

## 🐾 动物名单管理

### 初始登记（除青年联赛外）
- 赛季开始前必须提交**25只动物**的出战名单
- 赛季中只能使用已登记的动物参赛
- 青年联赛无需登记，每场比赛可自由选择

### 动物轮换机制

#### 常规轮换
- **时机**：每3轮比赛后
- **名额**：可轮换2只动物

#### 冬季转会窗口
- **时机**：第19轮后、第20轮前
- **名额**：可轮换12只动物
- **意义**：赛季中期大规模调整阵容的机会

### 轮换操作
1. 选择要移除的动物（从当前25人名单中）
2. 选择要添加的动物（从所有拥有的动物中）
3. 移除和添加数量必须相同
4. 不能超过可用的轮换名额

## 🎮 使用指南

### 开始使用

1. **打开系统**
   - 在主游戏界面（[`game3d.html`](game3d.html)）点击"🏆 联赛系统"按钮
   - 或直接在浏览器中打开 [`league.html`](league.html)

2. **加入联赛（首次）**
   - 选择你的地区（伊缇、拜尼、罗娜、罗兰、巴卡）
   - 输入队伍名称
   - 点击"开始联赛征程"
   - ⚠️ **所有玩家都从青年联赛开始**，无法选择其他联赛

3. **青年联赛特点**
   - 256队淘汰赛制
   - 无需登记动物，每场比赛自由选择5只动物
   - 前4名晋级甲级联赛

3. **进行比赛**
   - 切换到"赛程赛果"标签
   - 点击"进行下一轮比赛"按钮
   - 查看比赛结果和积分变化
   - 也可以点击"模拟完整赛季"快速完成赛季

4. **查看积分榜**
   - 切换到"积分榜"标签
   - 查看当前排名、积分、净胜球等数据
   - 绿色边框：直接升级队伍
   - 黄色边框：附加赛队伍
   - 红色边框：降级队伍
   - 黄色背景：你的队伍

5. **管理队伍**
   - 切换到"队伍管理"标签
   - 查看当前登记的25只动物（青年联赛无需管理）
   - 在合适的时机进行动物轮换
   - 可用轮换次数会自动显示

6. **查看赛季信息与生涯**
   - 切换到"赛季信息"标签查看当前赛季状态
   - 赛季结束后查看升降级情况和附加赛结果
   - 切换到"联赛生涯"标签查看职业生涯历史记录
   - 追踪每个赛季的排名、积分和升降级情况

7. **开始新赛季**
   - 赛季结束后，点击"开始下赛季"按钮
   - **如果晋级到甲级及以上联赛**，需先登记25只动物
   - 登记完成后自动开始新赛季
   - 如果降级或保级，则直接进入新赛季

## 💾 数据保存

系统会自动将以下数据保存到浏览器本地存储：
- 联赛数据（所有地区、所有等级）
- 当前赛季信息
- 玩家队伍信息
- 动物名单
- 比赛结果
- 积分榜数据

刷新页面后数据会自动加载，无需担心数据丢失。

## 🔧 技术架构

### 核心文件

1. **[`league_system.js`](league_system.js)** - 联赛系统核心逻辑
   - `LeagueSystem` 类：管理所有联赛数据和逻辑
   - 主要功能：
     - 联赛初始化
     - 赛程生成（循环赛制、淘汰赛制）
     - 比赛模拟
     - 积分榜更新
     - 升降级处理
     - 附加赛处理
     - 动物轮换管理
     - 数据持久化

2. **[`league.html`](league.html)** - 用户界面
   - 多标签页设计
   - 响应式布局
   - 实时数据展示
   - 交互式操作界面

### 核心方法说明

```javascript
// 初始化联赛系统
const leagueSystem = new LeagueSystem();

// 加入联赛（主线模式，只需地区和队名）
leagueSystem.joinLeague(region, teamName);

// 登记动物（晋级到甲级及以上时需要）
leagueSystem.registerAnimals(animals);

// 开始新赛季（自动处理升降级）
const result = leagueSystem.startNewSeason();
// result包含: { league, previousLeague, needsRegistration }

// 进行一轮比赛
const result = leagueSystem.playRound(region, leagueName);

// 轮换动物
leagueSystem.swapAnimals(animalsToRemove, animalsToAdd);

// 获取联赛信息
const league = leagueSystem.getLeagueInfo(region, leagueName);

// 获取玩家队伍
const playerTeam = leagueSystem.getPlayerTeam();

// 保存数据
const data = leagueSystem.saveData();

// 加载数据
leagueSystem.loadData(data);
```

## 🎯 游戏策略建议

### 1. 联赛选择
- **新手**：从青年联赛开始，熟悉系统
- **进阶**：挑战甲级或冠军联赛
- **高手**：直接进入超级联赛争夺冠军

### 2. 动物配置
- 均衡配置：攻守兼备的25只动物
- 专精配置：特定类型的动物组合
- 储备策略：预留轮换空间应对意外

### 3. 轮换时机
- **每3轮**：调整状态不佳的动物
- **第19轮**：利用冬季转会窗口大规模调整
- **关键比赛前**：针对性配置阵容

### 4. 升级策略
- **稳健型**：争取前2名直接升级
- **冒险型**：争取第3-6名，通过附加赛升级
- **保级型**：避免降级区，稳扎稳打

## 🐛 已知限制和未来改进

### 当前版本限制
1. 比赛模拟使用简化算法，未完全集成战斗系统
2. AI队伍实力为随机生成
3. 轮换界面功能需要完善
4. 缺少详细的比赛回放功能

### 计划改进
1. 集成完整的战斗系统
2. 优化AI队伍智能度
3. 添加历史数据统计
4. 增加多赛季连续管理
5. 实现跨地区转会系统
6. 添加杯赛系统

## 📞 技术支持

如遇到问题或有改进建议，请检查：
1. 浏览器控制台是否有错误信息
2. 本地存储是否正常工作
3. 动物数据是否完整
4. JavaScript 文件是否正确加载

## 🎉 开始你的联赛征程！

现在你已经了解了联赛系统的所有功能。记住：

1. 在主游戏界面点击"🏆 联赛系统"进入
2. 选择你的地区和队伍名称
3. 从青年联赛开始你的征程
4. 不断提升，最终成为大陆超级联赛冠军！

**最终目标**：从青年联赛（256队）→ 甲级联赛（24队）→ 冠军联赛（24队）→ 超级联赛（20队）→ **大陆冠军**！

---

*最后更新：2026-01-26*
*版本：1.0.0*